<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SerenaMind - Bienestar Emocional</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --bg-gradient: linear-gradient(135deg, #667eea, #764ba2);
  --card-bg: rgba(255,255,255,0.95);
  --primary: #6a8cff;
  --accent: #4caf50;
  --text: #333;
}
body {
  margin: 0;
  font-family: 'Segoe UI', system-ui;
  background: var(--bg-gradient);
  min-height: 100vh;
  color: var(--text);
}
header {
  text-align: center;
  padding: 1.5rem;
  color: white;
}
.container {
  display: grid;
  gap: 1.2rem;
  padding: 1rem;
  max-width: 1200px;
  margin: auto;
}
.card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 1rem;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  animation: fadeIn .6s ease;
}
@keyframes fadeIn {
  from {opacity:0; transform: translateY(10px);}
  to {opacity:1;}
}
h2 {
  margin-top: 0;
  color: var(--primary);
}
button {
  background: var(--primary);
  color: white;
  border: none;
  padding: .6rem 1rem;
  border-radius: 20px;
  cursor: pointer;
  transition: .3s;
}
button:hover {opacity:.85}
textarea, input, select {
  width: 100%;
  padding: .6rem;
  border-radius: 10px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}
#breathCircle {
  width: 120px;
  height: 120px;
  margin: auto;
  border-radius: 50%;
  background: radial-gradient(circle, #a1c4fd, #c2e9fb);
  animation: breathe 8s infinite;
}
@keyframes breathe {
  0% {transform: scale(1)}
  50% {transform: scale(1.5)}
  100% {transform: scale(1)}
}
canvas {
  max-width: 100%;
  display: block;
  margin: 10px auto;
}
footer {
  text-align: center;
  padding: 1rem;
  font-size: .85rem;
  color: #eee;
}
</style>
</head>
<body>

<header>
  <h1>SerenaMind</h1>
  <p>Apoyo emocional, mindfulness y autoconocimiento</p>
</header>

<div class="container">

<!-- CHAT EMOCIONAL -->
<div class="card">
  <h2>Chat de Apoyo Emocional</h2>
  <p><small>No es terapia cl√≠nica. Para crisis, busca ayuda profesional.</small></p>
  <textarea id="chatInput" placeholder="¬øC√≥mo te sientes hoy?"></textarea>
  <button onclick="sendMessage()">Hablar</button>
  <p id="chatResponse" style="margin-top: 1rem; padding: 0.8rem; background: #f0f0f0; border-radius: 8px; min-height: 2rem;"></p>
</div>

<!-- RESPIRACI√ìN -->
<div class="card">
  <h2>Ejercicio de Respiraci√≥n</h2>
  <p>Inhala 4s ‚Äì Mant√©n 4s ‚Äì Exhala 4s</p>
  <div id="breathCircle"></div>
</div>

<!-- MEDITACI√ìN -->
<div class="card">
  <h2>Meditaci√≥n Guiada</h2>
  <button onclick="startMeditation()">Iniciar meditaci√≥n</button>
</div>

<!-- DIARIO -->
<div class="card">
  <h2>Diario Emocional</h2>
  <select id="mood">
    <option value="1">üòû Muy mal</option>
    <option value="2">üòê Regular</option>
    <option value="3">üôÇ Bien</option>
    <option value="4">üòÑ Muy bien</option>
  </select>
  <button onclick="saveMood()">Guardar estado</button>
  <canvas id="moodChart" width="400" height="150"></canvas>
</div>

<!-- TCC -->
<div class="card">
  <h2>T√©cnicas TCC</h2>
  <ul>
    <li>Identifica pensamientos autom√°ticos</li>
    <li>Cuestiona evidencias reales</li>
    <li>Reformula de forma balanceada</li>
    <li>Acci√≥n conductual gradual</li>
  </ul>
</div>

<!-- MONETIZACI√ìN -->
<div class="card">
  <h2>Apoya el Proyecto</h2>
  <form action="https://www.paypal.com/donate" method="post" target="_blank">
    <input type="hidden" name="hosted_button_id" value="U53AQVA6Z6E54">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button">
  </form>
  <br><br>
  <a href="https://buy.stripe.com/dRmeVd4t34PA2BydR" target="_blank"><button>Versi√≥n Premium (Stripe) - 50‚Ç¨</button></a>
</div>

<!-- PUBLICIDAD -->
<div class="card">
  <h2>Publicidad</h2>
  <div style="height:90px;background:#eee;border-radius:10px;display:flex;align-items:center;justify-content:center;">
    Espacio Google AdSense
  </div>
</div>

</div>

<footer>
  Esto no sustituye atenci√≥n psicol√≥gica profesional.
  <br>
  Si est√°s en crisis, contacta servicios de emergencia.
</footer>

<script>
/* ================= CHAT GEMINI ================= */
async function sendMessage(){
  const inputElement = document.getElementById('chatInput');
  const responseElement = document.getElementById('chatResponse');
  const userMessage = inputElement.value.trim();
  
  if (!userMessage) return;
  
  responseElement.innerText = "Pensando...";
  
  try {
    const response = await fetch('https://195
        '/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyCBqZS0TGzxwYFiPijGJjMPxSd6a9x_rzc', {      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        systemInstruction: {
          parts: [{
            text: "Eres un asistente de apoyo emocional. Responde de forma emp√°tica y breve (m√°ximo 2-3 frases) usando principios de TCC. Valida emociones y ofrece estrategias pr√°cticas."
          }]
        },
        contents: [{
          role: "user",
          parts: [{
            text: userMessage
          }]
        }]
      })
    });
    
    const data = await response.json();
    
    if (!response.ok) {
      throw new Error(data.error?.message || 'Error en la conexi√≥n con la API');
    }
    
    const botResponse = data.candidates[0].content.parts[0].text;
    responseElement.innerText = botResponse;
    
  } catch (error) {
    console.error('Error:', error);
    responseElement.innerText = "Lo siento, hubo un problema al procesar tu mensaje. Int√©ntalo de nuevo.";
  } finally {
    inputElement.value = '';
  }
}

/* ================= MEDITACI√ìN ================= */
function startMeditation(){
  const msg = new SpeechSynthesisUtterance(
    "Cierra los ojos. Respira lento. Observa tus pensamientos sin juzgar."
  );
  speechSynthesis.speak(msg);
}

/* ================= DIARIO ================= */
function saveMood(){
  const mood = document.getElementById('mood').value;
  const data = JSON.parse(localStorage.getItem('moods') || "[]");
  data.push(Number(mood));
  localStorage.setItem('moods', JSON.stringify(data));
  drawChart();
}

function drawChart(){
  const data = JSON.parse(localStorage.getItem('moods') || "[]");
  const canvas = document.getElementById('moodChart');
  const ctx = canvas.getContext('2d');
  
  canvas.width = canvas.offsetWidth || 400;
  canvas.height = 150;
  
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  if (data.length === 0) return;
  
  ctx.beginPath();
  ctx.moveTo(0, canvas.height);
  
  data.forEach((v, i) => {
    const x = (i * canvas.width) / Math.max(data.length - 1, 1);
    const y = canvas.height - (v * 30);
    ctx.lineTo(x, y);
  });
  
  ctx.strokeStyle = "#6a8cff";
  ctx.lineWidth = 3;
  ctx.stroke();
}

drawChart();
</script>

</body>
</html>
